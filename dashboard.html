<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    	<!-- Meta Tags for SEO -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Temukan Cara Cepat Kaya dengan investasi cerdas dan sumber pendapatan pasif! Mulailah sekarang dan raih kebebasan finansial Anda. Ayo, wujudkan impianmu!">
<meta name="keywords" content="Koloni Semut, dashboard keuangan, saldo real-time, transaksi keuangan, manajemen keuangan, visualisasi data, kolonisemut.my.id">
<meta name="author" content="Koloni Semut">
<meta name="robots" content="index, follow">

<!-- Open Graph Meta Tags for Social Media -->
<meta property="og:title" content="Koloni Semut — Dashboard Keuangan Real-Time">
<meta property="og:description" content="Temukan Cara Cepat Kaya dengan investasi cerdas dan sumber pendapatan pasif! Mulailah sekarang dan raih kebebasan finansial Anda. Ayo, wujudkan impianmu!">
<meta property="og:image" content="https://kolonisemut.my.id/kolonisemut.png">
<meta property="og:url" content="https://kolonisemut.my.id">
<meta property="og:type" content="website">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Koloni Semut — Dashboard Keuangan Real-Time">
<meta name="twitter:description" content="Temukan Cara Cepat Kaya dengan investasi cerdas dan sumber pendapatan pasif! Mulailah sekarang dan raih kebebasan finansial Anda. Ayo, wujudkan impianmu!">
<meta name="twitter:image" content="https://kolonisemut.my.id/kolonisemut.png">
<meta name="twitter:site" content="@kolonisemut">

<!-- Canonical URL -->
<link rel="canonical" href="https://kolonisemut.my.id">

<!-- Favicon -->
<link rel="icon" type="image/png" href="https://kolonisemut.my.id/logo.png">

<!-- Apple Touch Icon -->
<link rel="apple-touch-icon" href="https://kolonisemut.my.id/logo.png">

<!-- Theme Color for Mobile Browsers -->
<meta name="theme-color" content="#007bff">
    <title>Koloni Semut — Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Google Font: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Toastr CSS -->  
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .header {
            background-color: #007bff;
            color: white;
            padding: 20px 0;
            text-align: center;
        }
        .header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .header p {
            font-size: 1.1rem;
            margin: 0;
        }
        .main-content {
            flex: 1;
            padding: 20px;
        }
        .balance {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .action-buttons .btn {
            font-size: 1rem; 
            padding: 10px 20px;
        }
        .online-status {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1rem;
            color: #28a745;
        }
        .online-status i {
            color: #28a745;
            border: solid 2px #b8b8b8;
            padding: 1px;
            align: center;
            border-radius: 100%;
            font-size:15px;
        }
        .update-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
        }
        .chart-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 0 auto 20px auto;
            max-width: 800px;
            position: relative;
        }
        .members-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .members-container .member-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            width: 150px;
        }
        .members-container .member-card i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .members-container .member-card h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
            color: #333;
        }
        .members-container .member-card p {
            font-size: 1rem;
            margin: 0;
            color: #666;
        }
        .current-members {
            text-align: center;
            margin-bottom: 20px;
        }
        .current-members i {
            font-size: 2rem;
            color: #007bff;
        }
        .current-members h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            color: #333;
        }
        .current-members p {
            font-size: 1rem;
            margin: 0;
            color: #666;
        }
        .grid-blocks {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }
        .grid-block {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
        }
        .grid-block i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #007bff;
        }
        .grid-block h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
            color: #333;
        }
        .grid-block p {
            font-size: 1rem;
            margin: 0;
            color: #666;
        }
        .footer {
            background-color: #007bff;
            color: white;
            text-align: center;
            padding: 10px 0;
            margin-top: auto;
        }
        .footer p {
            margin: 0;
            font-size: 0.9rem;
        }
        @media (min-width: 768px) {
            .grid-blocks {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .header p {
                font-size: 1rem;
            }
            .balance {
                font-size: 20px;
            }
            .chart-container {
                padding: 10px;
            }
        }
        /* Penyesuaian Toastr untuk notifikasi di bawah */ 
        #toast-container {
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            top: auto;
            right: auto;
        }
        .toast {
            font-family: 'Poppins', sans-serif;
            width: 300px;
            height: 70px;
            text-align: center;
        }
        .history-container {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin: 20px auto;
    max-width: 800px;
}

.history-container h3 {
    font-size: 1.5rem;
    font-weight: 600;
    color: #333;
}

.table {
    width: 100%;
    margin-bottom: 1rem;
    color: #212529;
}

.table th, .table td {
    padding: 0.75rem;
    vertical-align: top;
    border-top: 1px solid #dee2e6;
}

.table thead th {
    vertical-align: bottom;
    border-bottom: 2px solid #dee2e6;
}

.table-bordered {
    border: 1px solid #dee2e6;
}

.table-bordered th, .table-bordered td {
    border: 1px solid #dee2e6;
}

/* Progress Bar Styles */
.progress-bar-container {
    width: 100%;
    background-color: #e9ecef;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 20px;
    opacity: 0; /* Sembunyikan secara default */
    transition: opacity 0.5s ease-in-out; /* Efek fade-in dan fade-out */
    position: relative; /* Untuk posisi teks di dalam progress bar */
}

.progress-bar-container.visible {
    opacity: 1; /* Tampilkan progress bar */
}

.progress-bar {
    width: 0;
    height: 20px;
    background-color: #007bff;
    transition: width 2s ease-in-out; /* Animasi progress bar yang halus */
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    text-align: center;
    font-size: 0.9rem;
    color: #fff;
    opacity: 0; /* Sembunyikan teks secara default */
    transition: opacity 0.5s ease-in-out; /* Efek fade-in dan fade-out */
    display: flex;
    justify-content: space-between;
    padding: 0 10px;
}

.progress-bar-container.visible .progress-text {
    opacity: 1; /* Tampilkan teks saat progress bar terlihat */
}

#progressDescription {
    font-weight: 500;
}

#progressPercentage {
    font-weight: 600;
}
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="container">
            <h1><i class="fas fa-chart-line"></i> Koloni Semut - Dashboard</h1>
            <p>Visualisasi data dan saldo secara real-time</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <!-- Balance Section -->
            <div class="balance">
                <i class="fas fa-wallet"></i> Total Saldo: <span id="totalBalance">Rp. 12.000.000</span>
            </div>

            <!-- Online Status -->
            <div class="online-status">
                <i class="fas fa-circle"></i> Status: <span id="onlineStatus">Online</span>
            </div>

            <!-- Update Info -->
            <div class="update-info">
                Data diupdate setiap 5 detik secara real-time.
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#withdrawModal">
                    <i class="fas fa-money-bill-wave"></i> Withdraw
                </button>
                <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#rechargeModal">
                    <i class="fas fa-coins"></i> Recharge
                </button>
            </div>
            
<!-- Progress Bar Section -->
<div id="progressBarContainer" class="progress-bar-container">
    <div id="progressBar" class="progress-bar"></div>
    <div id="progressText" class="progress-text">
        <span id="progressDescription">Memuat Data...</span>
        <span id="progressPercentage">0%</span>
    </div>
</div>

            <!-- Chart Section -->
            <div class="chart-container">
                <canvas id="myChart"></canvas>
            </div>

            <!-- Current Members Section -->
            <div class="current-members">
                <i class="fas fa-users"></i>
                <h3>Jumlah Anggota Sekarang</h3>
                <p><span id="currentMembers">236.331</span></p>
            </div>

            <!-- Members Section -->
            <div class="members-container">
                <div class="member-card">
                    <i class="fas fa-user-plus"></i>
                    <h3>Bergabung</h3>
                    <p><span id="joinedMembers">0</span></p>
                </div>
                <div class="member-card">
                    <i class="fas fa-user-minus"></i>
                    <h3>Keluar</h3>
                    <p><span id="leftMembers">0</span></p>
                </div>
            </div>

            <!-- Grid Blocks Section -->
            <div class="grid-blocks">
                <div class="grid-block">
                    <i class="fas fa-piggy-bank"></i>
                    <h3>Tabungan</h3>
                    <p><span id="tabunganPercentage">25.00%</span></p>
                </div>
                <div class="grid-block">
                    <i class="fas fa-chart-line"></i>
                    <h3>Investasi</h3>
                    <p><span id="investasiPercentage">37.00%</span></p>
                </div>
                <div class="grid-block">
                    <i class="fas fa-hand-holding-heart"></i>
                    <h3>Donasi</h3>
                    <p><span id="donasiPercentage">31.00%</span></p>
                </div>
                <div class="grid-block">
                    <i class="fas fa-exchange-alt"></i>
                    <h3>Transaksi</h3>
                    <p><span id="transaksiPercentage">64.00%</span></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Riwayat Aktivitas -->
<div class="history-container">
    <div class="container">
        <h3 class="text-center mb-4">Riwayat Aktivitas Terakhir</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Waktu</th>
                    <th scope="col">Aktivitas</th>
                </tr>
            </thead>
            <tbody id="historyTableBody">
                <!-- Riwayat akan diisi oleh JavaScript -->
            </tbody>
        </table>
    </div>
</div>

    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <p>&copy; <span id="currentYear"></span> Koloni Semut — Dashboard | Dibuat dengan <i class="fas fa-heart"></i> oleh<a class="btn btn-link text-white" href="https://ariftirtana.com">Arif Tirtana</a></p>
        </div>
                <!-- Tombol Reset -->
   <!-- <a href="reset.html" class="btn btn-warning">
        <i class="fas fa-sync-alt"></i> Reset Data
    </a> -->
    <!-- Tambahkan link FAQ di sini -->
        <a href="faq.html" class="btn btn-link text-white">
            <i class="fas fa-question-circle"></i> FAQ
        </a>
</div>
    </div>

    <!-- Withdraw Modal -->
    <div class="modal fade" id="withdrawModal" tabindex="-1" aria-labelledby="withdrawModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="withdrawModalLabel"><i class="fas fa-money-bill-wave"></i> Withdraw</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="withdrawForm">
                        <div class="mb-3">
                            <label for="withdrawAmount" class="form-label">Jumlah Penarikan</label>
                            <input type="number" class="form-control" id="withdrawAmount" placeholder="Masukkan jumlah" required>
                        </div>
                        <div class="mb-3">
                            <label for="withdrawMethod" class="form-label">Metode Penarikan</label>
                            <select class="form-select" id="withdrawMethod" required>
                                <option value="">Pilih metode</option>
                                <option value="e-wallet">E-Wallet</option>
                                <option value="atm">Transfer ATM Bersama</option>
                                <option value="indomaret">Indomaret</option>
                                <option value="alfamart">Alfamart</option>
                                <option value="lawson">Lawson</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="otp" class="form-label">Kode OTP</label>
                            <input type="text" class="form-control" id="otp" placeholder="Masukkan kode OTP" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Proses Penarikan</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Recharge Modal -->
    <div class="modal fade" id="rechargeModal" tabindex="-1" aria-labelledby="rechargeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="rechargeModalLabel"><i class="fas fa-coins"></i> Recharge</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="rechargeForm">
                        <div class="mb-3">
                            <label for="rechargeAmount" class="form-label">Jumlah Pengisian</label>
                            <input type="number" class="form-control" id="rechargeAmount" placeholder="Masukkan jumlah" required>
                        </div>
                        <div class="mb-3">
                            <label for="rechargeMethod" class="form-label">Metode Pengisian</label>
                            <select class="form-select" id="rechargeMethod" required>
                                <option value="">Pilih metode</option>
                                <option value="bank">Transfer Bank</option>
                                <option value="e-wallet">E-Wallet</option>
                                <option value="retail">Gerai Retail</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="emailVerification" class="form-label">Verifikasi Email</label>
                            <input type="email" class="form-control" id="emailVerification" placeholder="Masukkan email" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Proses Pengisian</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script>
    // Data awal untuk 4 dataset dengan inisial tiga huruf
    let data = {
        labels: ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00'], // Label sumbu X dalam format jam
        datasets: [
            {
                label: 'Penjualan A', // Mengganti label dataset
                data: Array.from({ length: 7 }, () => Math.floor(Math.random() * 100)),
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            },
            {
                label: 'Penjualan B', // Mengganti label dataset
                data: Array.from({ length: 7 }, () => Math.floor(Math.random() * 100)),
                fill: false,
                borderColor: 'rgb(255, 99, 132)',
                tension: 0.1
            },
            {
                label: 'Penjualan C', // Mengganti label dataset
                data: Array.from({ length: 7 }, () => Math.floor(Math.random() * 100)),
                fill: false,
                borderColor: 'rgb(54, 162, 235)',
                tension: 0.1
            },
            {
                label: 'Penjualan D', // Mengganti label dataset
                data: Array.from({ length: 7 }, () => Math.floor(Math.random() * 100)),
                fill: false,
                borderColor: 'rgb(255, 206, 86)',
                tension: 0.1
            }
        ]
    };

    // Konfigurasi chart
    const config = {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        autoSkip: true,
                        maxTicksLimit: 5, // Batasi jumlah label sumbu Y
                        font: {
                            size: 12, // Ukuran font sumbu Y
                        }
                    }
                },
                x: {
                    ticks: {
                        font: {
                            size: 12, // Ukuran font sumbu X
                        }
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        font: {
                            size: 12, // Ukuran font legenda
                        }
                    }
                }
            }
        }
    };

    // Inisialisasi chart
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );

    // Fungsi untuk memformat angka ke dalam format Rupiah
    function formatRupiah(amount) {
        return `Rp. ${amount.toLocaleString('id-ID')}`;
    }

    // Total saldo awal
    let totalBalance = 12000000; // Saldo awal Rp. 12.000.000
    const maxBalance = 999999999; // Saldo maksimal Rp. 999.999.999
    const minBalance = 0; // Saldo minimal Rp. 0

    // Persentase awal
    let tabunganPercentage = 25.00;
    let investasiPercentage = 37.00;
    let donasiPercentage = 31.00;
    let transaksiPercentage = 64.00;

    // Data anggota
    const totalJoinedMembers = 4846000; // Total anggota yang bergabung
    let joinedMembers = 0; // Anggota yang bergabung (ditampilkan)
    let leftMembers = 0; // Anggota yang keluar
    let currentMembers = 236331; // Jumlah anggota yang ditampilkan di website

    // Data riwayat aktivitas
    let activityHistory = [];

    // Fungsi untuk memformat persentase dengan 2 digit di belakang koma
    function formatPercentage(value) {
        return `${value.toFixed(2)}%`;
    }

    // Fungsi untuk mengupdate persentase
    function updatePercentages() {
        document.getElementById('tabunganPercentage').textContent = formatPercentage(tabunganPercentage);
        document.getElementById('investasiPercentage').textContent = formatPercentage(investasiPercentage);
        document.getElementById('donasiPercentage').textContent = formatPercentage(donasiPercentage);
        document.getElementById('transaksiPercentage').textContent = formatPercentage(transaksiPercentage);
    }

    // Fungsi untuk menyimpan data ke localStorage
    function saveDataToLocalStorage() {
        localStorage.setItem('totalBalance', totalBalance);
        localStorage.setItem('tabunganPercentage', tabunganPercentage);
        localStorage.setItem('investasiPercentage', investasiPercentage);
        localStorage.setItem('donasiPercentage', donasiPercentage);
        localStorage.setItem('transaksiPercentage', transaksiPercentage);
        localStorage.setItem('joinedMembers', joinedMembers);
        localStorage.setItem('leftMembers', leftMembers);
        localStorage.setItem('currentMembers', currentMembers);
        localStorage.setItem('activityHistory', JSON.stringify(activityHistory));

        // Simpan data chart
        const chartData = myChart.data.datasets.map(dataset => dataset.data);
        localStorage.setItem('chartData', JSON.stringify(chartData));
    }

    // Fungsi untuk memuat data dari localStorage
    function loadDataFromLocalStorage() {
        const savedBalance = localStorage.getItem('totalBalance');
        const savedTabungan = localStorage.getItem('tabunganPercentage');
        const savedInvestasi = localStorage.getItem('investasiPercentage');
        const savedDonasi = localStorage.getItem('donasiPercentage');
        const savedTransaksi = localStorage.getItem('transaksiPercentage');
        const savedJoined = localStorage.getItem('joinedMembers');
        const savedLeft = localStorage.getItem('leftMembers');
        const savedCurrent = localStorage.getItem('currentMembers');
        const savedChartData = localStorage.getItem('chartData');
        const savedActivityHistory = localStorage.getItem('activityHistory');

        // Jika localStorage kosong, kembalikan ke setelan awal
        if (!savedBalance) {
            totalBalance = 12000000; // Saldo awal Rp. 12.000.000
            tabunganPercentage = 25.00;
            investasiPercentage = 37.00;
            donasiPercentage = 31.00;
            transaksiPercentage = 64.00;
            joinedMembers = 0;
            leftMembers = 0;
            currentMembers = 236331; // Jumlah anggota yang ditampilkan di website
            activityHistory = [];
        } else {
            if (savedBalance) totalBalance = parseFloat(savedBalance);
            if (savedTabungan) tabunganPercentage = parseFloat(savedTabungan);
            if (savedInvestasi) investasiPercentage = parseFloat(savedInvestasi);
            if (savedDonasi) donasiPercentage = parseFloat(savedDonasi);
            if (savedTransaksi) transaksiPercentage = parseFloat(savedTransaksi);
            if (savedJoined) joinedMembers = parseInt(savedJoined);
            if (savedLeft) leftMembers = parseInt(savedLeft);
            if (savedCurrent) currentMembers = parseInt(savedCurrent);
            if (savedActivityHistory) activityHistory = JSON.parse(savedActivityHistory);
        }

        // Update tampilan dengan data yang dimuat
        document.getElementById('totalBalance').textContent = formatRupiah(totalBalance);
        document.getElementById('joinedMembers').textContent = joinedMembers;
        document.getElementById('leftMembers').textContent = leftMembers;
        document.getElementById('currentMembers').textContent = currentMembers.toLocaleString('id-ID');
        updatePercentages();

        // Muat data chart
        if (savedChartData) {
            const chartData = JSON.parse(savedChartData);
            myChart.data.datasets.forEach((dataset, index) => {
                dataset.data = chartData[index];
            });
            myChart.update();
        } else {
            // Jika tidak ada data chart, inisialisasi dengan data acak
            myChart.data.datasets.forEach(dataset => {
                dataset.data = Array.from({ length: data.labels.length }, () => Math.floor(Math.random() * 100));
            });
            myChart.update();
        }

        // Update tabel riwayat
        updateActivityHistoryTable();
    }

    // Fungsi untuk menambahkan aktivitas ke riwayat
    function addActivityToHistory(activity) {
        const timestamp = new Date().toLocaleString(); // Tambahkan timestamp
        activityHistory.unshift({ timestamp, activity }); // Tambahkan ke awal array
        if (activityHistory.length > 10) {
            activityHistory.pop(); // Hapus aktivitas terlama jika lebih dari 10
        }
        saveDataToLocalStorage(); // Simpan ke localStorage
        updateActivityHistoryTable(); // Update tabel riwayat
    }

    // Fungsi untuk mengupdate tabel riwayat
    function updateActivityHistoryTable() {
        const historyTableBody = document.getElementById('historyTableBody');
        historyTableBody.innerHTML = ''; // Kosongkan tabel

        activityHistory.forEach((entry, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${entry.timestamp}</td>
                <td>${entry.activity}</td>
            `;
            historyTableBody.appendChild(row);
        });
    }

    // Fungsi untuk menampilkan progress bar dengan teks deskripsi dan persentase
    function showProgressBar(description, percentage) {
        const progressBarContainer = document.getElementById('progressBarContainer');
        const progressDescription = document.getElementById('progressDescription');
        const progressPercentage = document.getElementById('progressPercentage');
        const progressBar = document.getElementById('progressBar');

        progressDescription.textContent = description;
        progressPercentage.textContent = `${percentage}%`;
        progressBarContainer.classList.add('visible'); // Tampilkan progress bar dengan efek fade-in
        progressBar.style.width = `${percentage}%`; // Mulai animasi progress bar
    }

    // Fungsi untuk menyembunyikan progress bar
    function hideProgressBar() {
        const progressBarContainer = document.getElementById('progressBarContainer');
        const progressBar = document.getElementById('progressBar');

        progressBarContainer.classList.remove('visible'); // Sembunyikan progress bar dengan efek fade-out
        progressBar.style.width = '0'; // Reset progress bar
    }

    // Fungsi untuk simulasi proses loading dengan progress bar
    function simulateLoading() {
        let progress = 0;
        const interval = setInterval(() => {
            progress += 10; // Naikkan progress setiap 500ms
            showProgressBar('Memuat Data...', progress);

            if (progress >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    hideProgressBar();
                    updateChartAndBalance(); // Lanjutkan dengan update chart dan saldo
                }, 500); // Tunggu 500ms sebelum menyembunyikan progress bar
            }
        }, 500); // Update progress setiap 500ms
    }

    // Update chart dan saldo dengan progress bar
    function updateChartAndBalanceWithProgress() {
        simulateLoading();
    }

    // Fungsi untuk mengupdate data chart dan saldo
    function updateChartAndBalance() {
        // Generate data acak baru untuk setiap dataset
        myChart.data.datasets.forEach(dataset => {
            dataset.data = Array.from({ length: data.labels.length }, () => Math.floor(Math.random() * 100));
        });

        // Update chart
        myChart.update();

        // Simulasi penambahan atau pengurangan saldo secara acak
        const randomChange = Math.floor(Math.random() * 1000000) * (Math.random() > 0.5 ? 1 : -1); // Acak antara -1.000.000 hingga +1.000.000
        totalBalance += randomChange;

        // Pastikan saldo tidak melebihi batas maksimal atau minimal
        if (totalBalance > maxBalance) {
            totalBalance = maxBalance;
            toastr.info('Saldo telah mencapai batas maksimal!', 'Info', { timeOut: 2000 });
        } else if (totalBalance < minBalance) {
            totalBalance = minBalance;
            toastr.warning('Saldo telah mencapai batas minimal!', 'Peringatan', { timeOut: 2000 });
        }

        // Update tampilan saldo
        document.getElementById('totalBalance').textContent = formatRupiah(totalBalance);

        // Update persentase berdasarkan perubahan saldo
        const changeFactor = randomChange / 1000000; // Faktor perubahan
        tabunganPercentage = Math.max(0, Math.min(100, tabunganPercentage + changeFactor * 0.25));
        investasiPercentage = Math.max(0, Math.min(100, investasiPercentage + changeFactor * 0.37));
        donasiPercentage = Math.max(0, Math.min(100, donasiPercentage + changeFactor * 0.31));
        transaksiPercentage = Math.max(0, Math.min(100, transaksiPercentage + changeFactor * 0.64));

        // Update tampilan persentase
        updatePercentages();

        // Simpan data ke localStorage
        saveDataToLocalStorage();

        // Tambahkan aktivitas ke riwayat
        if (randomChange > 0) {
            addActivityToHistory(`Saldo bertambah sebesar Rp. ${randomChange.toLocaleString('id-ID')}`);
            toastr.success(`Saldo bertambah sebesar Rp. ${randomChange.toLocaleString('id-ID')}`, 'Berhasil', { timeOut: 2000 });
        } else {
            addActivityToHistory(`Saldo berkurang sebesar Rp. ${Math.abs(randomChange).toLocaleString('id-ID')}`);
            toastr.error(`Saldo berkurang sebesar Rp. ${Math.abs(randomChange).toLocaleString('id-ID')}`, 'Pengurangan', { timeOut: 2000 });
        }
    }

    // Fungsi untuk simulasi anggota bergabung dan keluar
    function simulateMembers() {
        const randomJoined = Math.floor(Math.random() * 15); // Anggota bergabung acak (0-14)
        const randomLeft = Math.floor(Math.random() * 3); // Anggota keluar acak (0-2)

        joinedMembers += randomJoined;
        leftMembers += randomLeft;
        currentMembers += randomJoined - randomLeft; // Update jumlah anggota sekarang

        // Update tampilan anggota
        document.getElementById('joinedMembers').textContent = joinedMembers;
        document.getElementById('leftMembers').textContent = leftMembers;
        document.getElementById('currentMembers').textContent = currentMembers.toLocaleString('id-ID');

        // Update saldo berdasarkan anggota bergabung/keluar
        const memberImpact = (randomJoined - randomLeft) * 100000; // Setiap anggota memengaruhi saldo sebesar Rp. 100.000
        totalBalance += memberImpact;

        // Update tampilan saldo
        document.getElementById('totalBalance').textContent = formatRupiah(totalBalance);

        // Simpan data ke localStorage
        saveDataToLocalStorage();

        // Tambahkan aktivitas ke riwayat
        if (randomJoined > 0) {
            addActivityToHistory(`${randomJoined} anggota bergabung!`);
            toastr.info(`${randomJoined} anggota bergabung!`, 'Info', { timeOut: 2000 });
        }
        if (randomLeft > 0) {
            addActivityToHistory(`${randomLeft} anggota keluar!`);
            toastr.warning(`${randomLeft} anggota keluar!`, 'Peringatan', { timeOut: 2000 });
        }
    }

    // Fungsi untuk simulasi anggota dengan progress bar
    function simulateMembersWithProgress() {
        let progress = 0;
        const interval = setInterval(() => {
            progress += 10; // Naikkan progress setiap 500ms
            showProgressBar('Memproses Data Anggota...', progress);

            if (progress >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    hideProgressBar();
                    simulateMembers(); // Lanjutkan dengan simulasi anggota
                }, 500); // Tunggu 500ms sebelum menyembunyikan progress bar
            }
        }, 500); // Update progress setiap 500ms
    }

    // Update chart dan saldo dengan progress bar setiap 10 detik
    setInterval(updateChartAndBalanceWithProgress, 10000);

    // Simulasi anggota dengan progress bar setiap 15 detik
    setInterval(simulateMembersWithProgress, 15000);

    // Menampilkan tahun dinamis di footer
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    // Konfigurasi Toastr untuk notifikasi di bawah
    toastr.options = {
        positionClass: 'toast-bottom-center', // Posisi notifikasi di bawah tengah
        timeOut: 2000,
        closeButton: true,
        progressBar: true,
        preventDuplicates: true
    };

    // Inisialisasi persentase
    updatePercentages();

    // Handle Withdraw Form Submission
    document.getElementById('withdrawForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const amount = parseFloat(document.getElementById('withdrawAmount').value);
        const method = document.getElementById('withdrawMethod').value;
        const otp = document.getElementById('otp').value;

        if (amount > totalBalance) {
            toastr.error('Jumlah penarikan melebihi saldo!', 'Error', { timeOut: 2000 });
            return;
        }

        totalBalance -= amount;
        document.getElementById('totalBalance').textContent = formatRupiah(totalBalance);
        toastr.success(`Penarikan sebesar Rp. ${amount.toLocaleString('id-ID')} berhasil!`, 'Berhasil', { timeOut: 2000 });

        // Tambahkan aktivitas ke riwayat
        addActivityToHistory(`Penarikan sebesar Rp. ${amount.toLocaleString('id-ID')} dilakukan.`);

        // Simpan data ke localStorage
        saveDataToLocalStorage();

        // Reset form
        document.getElementById('withdrawForm').reset();
        $('#withdrawModal').modal('hide');
    });

    // Handle Recharge Form Submission
    document.getElementById('rechargeForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const amount = parseFloat(document.getElementById('rechargeAmount').value);
        const method = document.getElementById('rechargeMethod').value;
        const email = document.getElementById('emailVerification').value;

        totalBalance += amount;
        document.getElementById('totalBalance').textContent = formatRupiah(totalBalance);
        toastr.success(`Pengisian sebesar Rp. ${amount.toLocaleString('id-ID')} berhasil!`, 'Berhasil', { timeOut: 2000 });

        // Tambahkan aktivitas ke riwayat
        addActivityToHistory(`Pengisian sebesar Rp. ${amount.toLocaleString('id-ID')} dilakukan.`);

        // Simpan data ke localStorage
        saveDataToLocalStorage();

        // Reset form
        document.getElementById('rechargeForm').reset();
        $('#rechargeModal').modal('hide');
    });

    // Muat data dari localStorage saat halaman dimuat
    window.onload = function() {
        loadDataFromLocalStorage();
    };
</script>
</body>
</html>